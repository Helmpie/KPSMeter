cscope 15 $HOME\Documents\CodeBlocks Projects\KPS"               0000021348
	@C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\DRAWFU~1.CPP

1 
	~"D¿wFunùiÚs.h
"

3 
	~<wšdows.h
>

4 
	~<Gdlus.h
>

5 
	~<¡ršg
>

6 
	~<deque
>

7 
	~<io¡»am
>

8 
	~"S‘tšgs.h
"

10 cÚ¡ 
	gwidth
 = 
S‘tšgs
::
g‘In¡ªû
()->
g‘G¿phWidth
();

11 cÚ¡ 
	gheight
 = 
S‘tšgs
::
g‘In¡ªû
()->
g‘G¿phHeight
();

12 cÚ¡ 
	g´ecisiÚ
 = 
S‘tšgs
::
g‘In¡ªû
()->
g‘G¿phP»cisiÚ
();

14 cÚ¡ 
	gw_çùÜ
 = ()
width
/
´ecisiÚ
;

15 cÚ¡ 
	gh_çùÜ
 = 4;

17 
	gD¿w
::
	$‹xt
(
PAINTSTRUCT
 &
ps
,

18 
HDC
 &
hdc
,

19 cÚ¡ 
COLORREF
 &
‹xt_cŞÜ
,

20 cÚ¡ 
COLORREF
 &
back_cŞÜ
,

21 cÚ¡ 
HFONT
 &
hFÚt
,

22 
tİ_x
,

23 
tİ_y
,

24 
bÙ_x
,

25 
bÙ_y
,

26 
¡d
::
¡ršg
 &
¡r
)

29 
	`S‘TextCŞÜ
(
hdc
, 
‹xt_cŞÜ
);

30 
	`S–eùObjeù
(
hdc
, 
hFÚt
);

33 
RECT
 
rc
;

34 
	`S‘BkCŞÜ
(
hdc
, 
back_cŞÜ
);

37 ::
	`S‘Reù
(&
rc
,
tİ_x
,
tİ_y
,
bÙ_x
,
bÙ_y
);

40 ::
	`D¿wText
(
hdc
,
¡r
.
	`c_¡r
(),-1,&
rc
,
DT_LEFT
 | 
DT_EXTERNALLEADING
 | 
DT_WORDBREAK
);

41 
	}
}

43 
	gD¿w
::
	$‹xt
(
PAINTSTRUCT
 &
ps
,

44 
HDC
 &
hdc
,

45 cÚ¡ 
COLORREF
 &
‹xt_cŞÜ
,

46 cÚ¡ 
COLORREF
 &
back_cŞÜ
,

47 cÚ¡ 
HFONT
 &
hFÚt
,

48 
tİ_x
,

49 
tİ_y
,

50 
bÙ_x
,

51 
bÙ_y
,

52 cÚ¡ * 
¡r
)

55 
	`S‘TextCŞÜ
(
hdc
, 
‹xt_cŞÜ
);

56 
	`S–eùObjeù
(
hdc
, 
hFÚt
);

59 
RECT
 
rc
;

60 
	`S‘BkCŞÜ
(
hdc
, 
back_cŞÜ
);

63 ::
	`S‘Reù
(&
rc
,
tİ_x
,
tİ_y
,
bÙ_x
,
bÙ_y
);

66 ::
	`D¿wText
(
hdc
,
¡r
,-1,&
rc
,
DT_LEFT
 | 
DT_EXTERNALLEADING
 | 
DT_WORDBREAK
);

67 
	}
}

69 
	gD¿w
::
g¿ph
(
PAINTSTRUCT
 &
ps
,

70 
HDC
 &
hdc
,

71 cÚ¡ 
¡d
::
deque
<>* 
dÙs
)

75 
Gdlus
::
G¿phics
 
g¿phics
(
hdc
);

76 
	gGdlus
::
P’
 
wh™eP’
(
Gdlus
::
CŞÜ
(255, 255, 255, 255), 1);

78 
	gi
=0; i<
	gdÙs
->
size
()-1; i++)

80 
	gg¿phics
.
D¿wLše
(&
wh™eP’
,

81 
i
*
w_çùÜ
,

82 
height
-(*
dÙs
)[
i
]*
h_çùÜ
,

83 (
i
+1)*
w_çùÜ
,

84 
height
-(*
dÙs
)[
i
+1]*
h_çùÜ
);

	@C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\DRAWFU~1.H

1 #iâdeà
DRAWFUNCTIONS_H_INCLUDED


2 
	#DRAWFUNCTIONS_H_INCLUDED


	)

4 
	~<wšdows.h
>

5 
	~<¡ršg
>

6 
	~<deque
>

7 
	~<gdlus.h
>

11 
Çme¥aû
 
	gD¿w


25 
‹xt
(
PAINTSTRUCT
 &
ps
,

26 
HDC
 &
hdc
,

27 cÚ¡ 
COLORREF
 &
‹xt_cŞÜ
,

28 cÚ¡ 
COLORREF
 &
back_cŞÜ
,

29 cÚ¡ 
HFONT
 &
hFÚt
,

30 cÚ¡ 
tİ_x
,

31 cÚ¡ 
tİ_y
,

32 cÚ¡ 
bÙ_x
,

33 cÚ¡ 
bÙ_y
,

34 
¡d
::
¡ršg
 &
¡r
);

48 
‹xt
(
PAINTSTRUCT
 &
ps
,

49 
HDC
 &
hdc
,

50 cÚ¡ 
COLORREF
 &
‹xt_cŞÜ
,

51 cÚ¡ 
COLORREF
 &
back_cŞÜ
,

52 cÚ¡ 
HFONT
 &
hFÚt
,

53 cÚ¡ 
tİ_x
,

54 cÚ¡ 
tİ_y
,

55 cÚ¡ 
bÙ_x
,

56 cÚ¡ 
bÙ_y
,

57 cÚ¡ * 
¡r
);

59 
g¿ph
(
PAINTSTRUCT
 &
ps
,

60 
HDC
 &
hdc
,

61 cÚ¡ 
¡d
::
deque
<>* 
dÙs
);

	@C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\Graph.cpp

1 
	~"G¿ph.h
"

2 
	~<io¡»am
>

3 
	~"D¿wFunùiÚs.h
"

5 
	gG¿ph
::
	$G¿ph
(
IÅutHªdËr
* 
šput
)

6 : 
	$šput
(
šput
)

8 
dÙs
 = 
¡d
::
deque
<>(
S‘tšgs
::
	`g‘In¡ªû
()->
	`g‘G¿phP»cisiÚ
(), 0);

9 
	}
}

11 
	gG¿ph
::~
	$G¿ph
()

14 
	}
}

16 
G¿ph
::
	$addDÙ
(cÚ¡ & 
dÙ
)

18 
dÙs
.
	`pİ_äÚt
();

19 
dÙs
.
	`push_back
(
dÙ
);

20 
	}
}

22 
	g¡d
::
deque
<>* 
G¿ph
::
	$g‘DÙPŒ
()

24  &
dÙs
;

25 
	}
}

	@C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\Graph.h

1 #iâdeà
GRAPH_H_INCLUDED


2 
	#GRAPH_H_INCLUDED


	)

4 
	~"WšdowIÁ”çû.h
"

5 
	~"IÅutHªdËr.h
"

6 
	~"S‘tšgs.h
"

7 
	~<deque
>

10 şas 
	cG¿ph
 : 
public
 
WšdowIÁ”çû


12 
public
:

13 
G¿ph
(
IÅutHªdËr
* 
šput
);

14 ~
G¿ph
();

16 
addDÙ
(cÚ¡ & 
dÙ
);

18 
	m¡d
::
deque
<>* 
g‘DÙPŒ
();

20 
	m´iv©e
:

21 
IÅutHªdËr
* 
šput
;

22 
	m¡d
::
deque
<> 
dÙs
;

	@C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\INPUTH~1.CPP

1 
	~"IÅutHªdËr.h
"

3 
	~"S‘tšgs.h
"

5 
	gIÅutHªdËr
::
	$IÅutHªdËr
()

8 
i
=0;i<
deque_size
;i++è{ 
key_que
.
	`push_back
(0); }

9 
	}
}

11 
	gIÅutHªdËr
::~
	$IÅutHªdËr
()

14 
	}
}

16 
IÅutHªdËr
::
	$keydown
()

18 
keycouÁ
++;

19 
tÙ®_keys
++;

20 
	}
}

22 
	gIÅutHªdËr
::
	$Re£tMaxKps
()

24 
max_kps
 = 0;

25 
kps
 = -1;

27 iàĞ
S‘tšgs
::
	`g‘In¡ªû
()->
	`P»cisiÚModeOn
() )

29 
i
=0;i<
deque_size
;i++è{ 
key_que
[i] = 0; }

31 
	}
}

33 
	gIÅutHªdËr
::
	$ÿlcuÏ‹_kps_­r
()

35 
kps
 = kps*0.90;

36 
kps
 +ğ
keycouÁ
;

37 
keycouÁ
 = 0;

39 ià(
kps
 > 
max_kps
) {max_kps=kps;}

41 
	`upd©e_kps
();

42 
	}
}

44 
	gIÅutHªdËr
::
	$ÿlcuÏ‹_kps_´ec
()

46 
kps
 = 0;

47 
key_que
.
	`pİ_äÚt
();

48 
key_que
.
	`push_back
(
keycouÁ
);

49 
i
=0;i<
deque_size
;i++è{ 
kps
 +ğ
key_que
[i]; }

51 
kps
 = kps/
deque_div
;

53 
keycouÁ
 = 0;

55 ià(
kps
 > 
max_kps
) {max_kps=kps;}

57 
	`upd©e_kps
();

58 
	}
}

60 
št16_t
 
	gIÅutHªdËr
::
	$g‘KeycouÁ
()

62  
keycouÁ
;

63 
	}
}

65 
	gIÅutHªdËr
::
	$g‘Kps
()

67  
kps
;

68 
	}
}

	@C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\INPUTH~1.H

1 #iâdeà
INPUTHANDLER_H_INCLUDED


2 
	#INPUTHANDLER_H_INCLUDED


	)

4 
	~<wšdows.h
>

5 
	~<c¡dšt
>

6 
	~<deque
>

8 
	~"WšdowIÁ”çû.h
"

10 cÚ¡ 
št16_t
 
	gdeque_size
 = 14;

11 cÚ¡ 
	gdeque_div
 = (()
deque_size
)/10;

13 şas 
	cIÅutHªdËr
 : 
public
 
WšdowIÁ”çû


15 
public
:

17 
IÅutHªdËr
();

18 ~
IÅutHªdËr
();

21 
keydown
();

24 
Re£tMaxKps
();

27 
ÿlcuÏ‹_kps_­r
();

30 
ÿlcuÏ‹_kps_´ec
();

33 
št16_t
 
g‘KeycouÁ
();

34 
g‘Kps
();

35 
g‘Tim”IÁ”v®
();

37 
	m´iv©e
:

38 
št16_t
 
keycouÁ
 = 0;

39 
	m¡d
::
deque
<> 
key_que
;

	@C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\Settings.cpp

1 
	~"S‘tšgs.h
"

3 
	~"WšdowIÁ”çû.h
"

5 
	~<io¡»am
>

7 
S‘tšgs
* 
	gS‘tšgs
::
š¡ªû
 = 0;

9 
S‘tšgs
* 
	gS‘tšgs
::
	$g‘In¡ªû
()

11 ià(
š¡ªû
 == 0)

13 
š¡ªû
 = 
Ãw
 
	`S‘tšgs
();

16  
š¡ªû
;

17 
	}
}

19 
	gS‘tšgs
::
	$S‘tšgs
()

22 
	}
}

24 
S‘tšgs
::~
	$S‘tšgs
()

27 
	}
}

29 
S‘tšgs
::
	$ToggËAlwaysOnTİ
()

31 ià(!
b_®ways_Ú_tİ
)

33 
	`toggË_wšdow_Ú_tİ
(
Œue
);

34 
b_®ways_Ú_tİ
 = 
Œue
;

38 
	`toggË_wšdow_Ú_tİ
(
çl£
);

39 
b_®ways_Ú_tİ
 = 
çl£
;

41 
	}
}

43 
boŞ
 
	gS‘tšgs
::
	$WšdowIsAOT
()

45  
b_®ways_Ú_tİ
;

46 
	}
}

48 
	gS‘tšgs
::
	$ToggËWšdowBÜd”s
()

50 ià(!
b_wšdow_has_bÜd”s
)

52 
	`toggË_wšdow_bÜd”s
(
Œue
);

53 
b_wšdow_has_bÜd”s
 = 
Œue
;

57 
	`toggË_wšdow_bÜd”s
(
çl£
);

58 
b_wšdow_has_bÜd”s
 = 
çl£
;

60 
	}
}

62 
boŞ
 
	gS‘tšgs
::
	$WšdowHasBÜd”s
()

64  
b_wšdow_has_bÜd”s
;

65 
	}
}

67 
	gS‘tšgs
::
	$ToggËP»cisiÚMode
()

69 ià(!
b_´ecisiÚ_mode
)

71 
b_´ecisiÚ_mode
 = 
Œue
;

75 
b_´ecisiÚ_mode
 = 
çl£
;

77 
	}
}

79 
boŞ
 
	gS‘tšgs
::
	$P»cisiÚModeOn
()

81  
b_´ecisiÚ_mode
;

82 
	}
}

84 
	gS‘tšgs
::
	$ToggËTÙ®Keys
()

86 ià(!
b_tÙ®_keys_Ú
)

88 
b_tÙ®_keys_Ú
 = 
Œue
;

92 
b_tÙ®_keys_Ú
 = 
çl£
;

94 
	}
}

96 
boŞ
 
	gS‘tšgs
::
	$TÙ®KeysOn
()

98  
b_tÙ®_keys_Ú
;

99 
	}
}

101 
	gS‘tšgs
::
	$g‘G¿phP»cisiÚ
()

103  
g¿ph_´ecisiÚ
;

104 
	}
}

106 
	gS‘tšgs
::
	$g‘G¿phWidth
()

108  
g¿ph_width
;

109 
	}
}

111 
	gS‘tšgs
::
	$g‘G¿phHeight
()

113  
g¿ph_height
;

114 
	}
}

116 
	gS‘tšgs
::
	$g‘G¿phSŒ‘ch
()

118  
g¿ph_¡»tch
;

119 
	}
}

121 
	gS‘tšgs
::
	$g‘G¿phUpd©eR©e
()

123  
g¿ph_upd©e_¿‹
;

124 
	}
}

	@C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\Settings.h

1 #iâdeà
SETTINGS_H_INCLUDED


2 
	#SETTINGS_H_INCLUDED


	)

4 
	~"WšdowIÁ”çû.h
"

6 şas 
	cS‘tšgs
 : 
public
 
WšdowIÁ”çû


8 
´iv©e
:

9 
S‘tšgs
* 
š¡ªû
;

11 
S‘tšgs
();

12 ~
S‘tšgs
();

14 
boŞ
 
	mb_®ways_Ú_tİ
 = 
çl£
;

15 
boŞ
 
	mb_wšdow_has_bÜd”s
 = 
Œue
;

16 
boŞ
 
	mb_tÙ®_keys_Ú
 = 
Œue
;

17 
boŞ
 
	mb_´ecisiÚ_mode
 = 
Œue
;

19 
	mg¿ph_upd©e_¿‹
 = 350;

20 
	mg¿ph_´ecisiÚ
 = 150;

21 
	mg¿ph_width
 = 400;

22 
	mg¿ph_height
 = 235;

23 
	mg¿ph_¡»tch
 = 4;

25 
	mpublic
:

26 
S‘tšgs
* 
g‘In¡ªû
();

29 
ToggËAlwaysOnTİ
();

30 
boŞ
 
WšdowIsAOT
();

33 
ToggËWšdowBÜd”s
();

34 
boŞ
 
WšdowHasBÜd”s
();

37 
ToggËP»cisiÚMode
();

38 
boŞ
 
P»cisiÚModeOn
();

41 
ToggËTÙ®Keys
();

42 
boŞ
 
TÙ®KeysOn
();

44 
g‘G¿phP»cisiÚ
();

45 
g‘G¿phWidth
();

46 
g‘G¿phHeight
();

47 
g‘G¿phSŒ‘ch
();

48 
g‘G¿phUpd©eR©e
();

	@C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\WINDOW~1.CPP

1 
	~"WšdowIÁ”çû.h
"

3 
	~<¡ršg
>

5 
	~"S‘tšgs.h
"

7 
	gWšdowIÁ”çû
::
	$upd©e_kps
()

9 
¡d
::
¡ršg
 
h–p_¡r
 = std::
	`to_¡ršg
(
¡©ic_ÿ¡
<>(
kps
)) + " ";

10 
kps_¡r
 = 
h–p_¡r
.
	`c_¡r
();

12 
¡d
::
¡ršg
 
h–p_¡r_2
 = std::
	`to_¡ršg
(
¡©ic_ÿ¡
<>(
max_kps
)) + " ";

13 
max_kps_¡r
 = 
h–p_¡r_2
.
	`c_¡r
();

15 ià(
S‘tšgs
::
	`g‘In¡ªû
()->
	`TÙ®KeysOn
())

17 
¡d
::
¡ršg
 
h–p_¡r_3
 = std::
	`to_¡ršg
(
¡©ic_ÿ¡
<>(
tÙ®_keys
)) + " ";

18 
tÙ®_keys_¡r
 = 
h–p_¡r_3
.
	`c_¡r
();

21 
	`Red¿wWšdow
(*
wšdow_±r
, 
NULL
, NULL, 
RDW_INVALIDATE
);

22 
	}
}

24 
	gWšdowIÁ”çû
::
	$toggË_wšdow_Ú_tİ
Ğ
boŞ
 
£t_Ú_tİ
 )

26 ià(
£t_Ú_tİ
)

29 
	`S‘WšdowPos
(*
wšdow_±r
, 
HWND_TOPMOST
, 0, 0, 0, 0, 
SWP_NOMOVE
 | 
SWP_NOSIZE
);

34 
	`S‘WšdowPos
(*
wšdow_±r
, 
HWND_NOTOPMOST
, 0, 0, 0, 0, 
SWP_NOMOVE
 | 
SWP_NOSIZE
);

36 
	}
}

38 
	gWšdowIÁ”çû
::
	$toggË_wšdow_bÜd”s
(
boŞ
 
£t_bÜd”
)

40 ià(
£t_bÜd”
)

43 
	`S‘WšdowLÚgPŒ
(*
wšdow_±r
,
GWL_STYLE
,
WS_OVERLAPPEDWINDOW
);

44 
	`ShowWšdow
(*
wšdow_±r
, 
SW_SHOW
);

49 
	`S‘WšdowLÚgPŒ
(*
wšdow_±r
,
GWL_STYLE
,
WS_BORDER
);

50 
	`ShowWšdow
(*
wšdow_±r
, 
SW_SHOW
);

52 
	}
}

54 
	gWšdowIÁ”çû
::
	$£tWšdow_±r
(
HWND
* 
hwnd
)

56 
wšdow_±r
 = 
hwnd
;

57 
	}
}

59 
HWND
* 
	gWšdowIÁ”çû
::
	$g‘Wšdow_±r
()

61  
wšdow_±r
;

62 
	}
}

	@C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\WINDOW~1.H

1 #iâdeà
WINDOWINTERFACE_H_INCLUDED


2 
	#WINDOWINTERFACE_H_INCLUDED


	)

4 
	~<wšdows.h
>

8 şas 
	cWšdowIÁ”çû


10 
	mpublic
:

12 
upd©e_kps
();

15 
toggË_wšdow_Ú_tİ
Ğ
boŞ
 
£t_Ú_tİ
 );

16 
toggË_wšdow_bÜd”s
Ğ
boŞ
 
£t_bÜd”
 );

19 
£tWšdow_±r
(
HWND
* 
hwnd
);

20 
HWND
* 
g‘Wšdow_±r
();

23 cÚ¡ * 
	mkps_¡r
 = "";

24 cÚ¡ * 
	mmax_kps_¡r
 = "";

25 cÚ¡ * 
	mtÙ®_keys_¡r
 = "";

27 
	m´Ùeùed
:

28 
kps
 = 0;

29 
	mmax_kps
 = 0;

30 
	mtÙ®_keys
 = 0;

31 
HWND
* 
	mwšdow_±r
;

33 
	m´iv©e
:

	@C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\main.cpp

1 
	~<io¡»am
>

2 
	~<wšdows.h
>

3 
	~<¡dio.h
>

4 
	~<Tch¬.h
>

5 
	~<gdlus.h
>

7 
	~"S‘tšgs.h
"

8 
	~"IÅutHªdËr.h
"

9 
	~"D¿wFunùiÚs.h
"

10 
	~"G¿ph.h
"

12 
IÅutHªdËr
 
	gšput
;

13 
G¿ph
 
g¿ph
(&
šput
);

15 cÚ¡ 
	gg_szCÏssName1
[] = "myWindowClass1";

16 cÚ¡ 
	gg_szCÏssName2
[] = "myWindowClass2";

19 
	#COMM_AOT
 1

	)

20 
	#COMM_BORDER
 2

	)

21 
	#COMM_PREC
 3

	)

22 
	#COMM_TOT
 4

	)

25 cÚ¡ 
	gKPS_TIMER
 = 1;

26 cÚ¡ 
	gGRAPH_TIMER
 = 2;

28 
LRESULT
 
	tCALLBACK
 (*
	tÿÎback_±r
)(
	tHWND
,
	tUINT
,
	tWPARAM
,
	tLPARAM
);

30 
	swšdowInfÜm©iÚ


32 
width
;

33 
height
;

34 cÚ¡ * 
g_szCÏssName
;

35 cÚ¡ * 
t™Ë
;

36 cÚ¡ * 
bg
;

37 
ÿÎback_±r
 
WndProc
;

39 
	`wšdowInfÜm©iÚ
(
width
,

40 
height
,

41 cÚ¡ * 
g_szCÏssName
,

42 cÚ¡ * 
t™Ë
,

43 cÚ¡ * 
bg
,

44 
ÿÎback_±r
 
WndProc
)

45 : 
	`width
(
width
), 
	`height
(
height
), 
	`g_szCÏssName
(
g_szCÏssName
), 
	`t™Ë
(
t™Ë
), 
	`bg
(
bg
), 
	`WndProc
(
WndProc
) {}

48 
	$C»©eRightClickM’u
(
HWND
 &
hwnd
)

51 
POINT
 
p
;

52 
	`G‘CursÜPos
(&
p
);

55 
HMENU
 
hM’u
 = 
	`C»©ePİupM’u
();

60 iàĞ
S‘tšgs
::
	`g‘In¡ªû
()->
	`WšdowIsAOT
() )

62 ::
	`Aµ’dM’u
(
hM’u
,
MF_CHECKED
,
COMM_AOT
,
	`_T
("Always onop"));

66 ::
	`Aµ’dM’u
(
hM’u
,
MF_UNCHECKED
,
COMM_AOT
,
	`_T
("Always onop"));

70 iàĞ
S‘tšgs
::
	`g‘In¡ªû
()->
	`WšdowHasBÜd”s
() )

72 ::
	`Aµ’dM’u
(
hM’u
,
MF_UNCHECKED
,
COMM_BORDER
,
	`_T
("Borderless"));

76 ::
	`Aµ’dM’u
(
hM’u
,
MF_CHECKED
,
COMM_BORDER
,
	`_T
("Borderless"));

79 iàĞ
S‘tšgs
::
	`g‘In¡ªû
()->
	`P»cisiÚModeOn
() )

81 ::
	`Aµ’dM’u
(
hM’u
,
MF_CHECKED
,
COMM_PREC
,
	`_T
("Precision Mode"));

85 ::
	`Aµ’dM’u
(
hM’u
,
MF_UNCHECKED
,
COMM_PREC
,
	`_T
("Precision Mode"));

88 iàĞ
S‘tšgs
::
	`g‘In¡ªû
()->
	`TÙ®KeysOn
() )

90 ::
	`Aµ’dM’u
(
hM’u
,
MF_CHECKED
,
COMM_TOT
,
	`_T
("Show Total Keys"));

94 ::
	`Aµ’dM’u
(
hM’u
,
MF_UNCHECKED
,
COMM_TOT
,
	`_T
("Show Total Keys"));

98 
	`T¿ckPİupM’u
Ğ
hM’u
,

99 
TPM_RIGHTBUTTON
,

100 
p
.
x
,

101 
p
.
y
,

103 
hwnd
,

104 
NULL
);

105 
	}
}

108 
LRESULT
 
CALLBACK
 
	$WndProcPrim
(
HWND
 
hwnd
, 
UINT
 
msg
, 
WPARAM
 
wP¬am
, 
LPARAM
 
lP¬am
)

113 
msg
)

115 
WM_TIMER
:

117 ià(
S‘tšgs
::
	`g‘In¡ªû
()->
	`P»cisiÚModeOn
())

119 
šput
.
	`ÿlcuÏ‹_kps_´ec
();

123 
šput
.
	`ÿlcuÏ‹_kps_­r
();

126 
WM_PAINT
:

128 cÚ¡ 
COLORREF
 
cŞÜWh™e
 = 
	`RGB
(255, 255, 255);

129 cÚ¡ 
COLORREF
 
cŞÜBÏck
 = 
	`RGB
(0, 0, 0);

131 cÚ¡ 
HFONT
 
hFÚt_l
 = 
	`C»©eFÚt
(70, 0, 0, 0, 
FW_BOLD
, 0, 0, 0, 
DEFAULT_CHARSET
, 
OUT_OUTLINE_PRECIS
,

132 
CLIP_DEFAULT_PRECIS
, 
ANTIALIASED_QUALITY
, 
DEFAULT_PITCH
 | 
FF_SWISS
, 
	`_T
("Franklin Gothic Medium"));

133 cÚ¡ 
HFONT
 
hFÚt_s
 = 
	`C»©eFÚt
(40, 0, 0, 0, 
FW_BOLD
, 0, 0, 0, 
DEFAULT_CHARSET
, 
OUT_OUTLINE_PRECIS
,

134 
CLIP_DEFAULT_PRECIS
, 
ANTIALIASED_QUALITY
, 
DEFAULT_PITCH
 | 
FF_SWISS
, 
	`_T
("Franklin Gothic Medium"));

136 cÚ¡ * 
kps_txt
 = "kps: ";

137 cÚ¡ * 
max_txt
 = "max: ";

138 cÚ¡ * 
tÙ_txt
 = "total: ";

140 
PAINTSTRUCT
 
ps
;

141 
HDC
 
hdc
;

143 
hdc
 = 
	`BegšPašt
(
hwnd
, &
ps
);

145 
D¿w
::
	`‹xt
(
ps
,
hdc
,
cŞÜWh™e
,
cŞÜBÏck
,
hFÚt_l
,10,5,140,70,
kps_txt
);

146 
D¿w
::
	`‹xt
(
ps
,
hdc
,
cŞÜWh™e
,
cŞÜBÏck
,
hFÚt_s
,10,70,140,110,
max_txt
);

147 
D¿w
::
	`‹xt
(
ps
,
hdc
,
cŞÜWh™e
,
cŞÜBÏck
,
hFÚt_l
,130,5,300,70,
šput
.
kps_¡r
);

148 
D¿w
::
	`‹xt
(
ps
,
hdc
,
cŞÜWh™e
,
cŞÜBÏck
,
hFÚt_s
,100,70,300,110,
šput
.
max_kps_¡r
);

150 iàĞ
S‘tšgs
::
	`g‘In¡ªû
()->
	`TÙ®KeysOn
() )

152 
D¿w
::
	`‹xt
(
ps
,
hdc
,
cŞÜWh™e
,
cŞÜBÏck
,
hFÚt_s
,10,110,140,150,
tÙ_txt
);

153 
D¿w
::
	`‹xt
(
ps
,
hdc
,
cŞÜWh™e
,
cŞÜBÏck
,
hFÚt_s
,100,110,300,150,
šput
.
tÙ®_keys_¡r
);

156 ::
	`R–—£DC
(0,
hdc
);

157 
	`EndPašt
(
hwnd
, &
ps
);

162 
WM_CONTEXTMENU
:

164 
	`C»©eRightClickM’u
(
hwnd
);

167 
	`Po¡Mes§ge
(
hwnd
, 
WM_NULL
, 0, 0);

172 
WM_COMMAND
:

175 
WORD
 
commªd
 = 
	`LOWORD
(
wP¬am
);

177 
commªd
)

179 
COMM_AOT
:

180 
S‘tšgs
::
	`g‘In¡ªû
()->
	`ToggËAlwaysOnTİ
();

183 
COMM_BORDER
:

184 
S‘tšgs
::
	`g‘In¡ªû
()->
	`ToggËWšdowBÜd”s
();

187 
COMM_PREC
:

188 
S‘tšgs
::
	`g‘In¡ªû
()->
	`ToggËP»cisiÚMode
();

191 
COMM_TOT
:

192 
S‘tšgs
::
	`g‘In¡ªû
()->
	`ToggËTÙ®Keys
();

193 
	`Inv®id©eReù
 (
hwnd
, 
NULL
, 
Œue
);

194 
	`Upd©eWšdow
 (
hwnd
);

227 
WM_CLOSE
:

229 
	`KlTim”
(
hwnd
,
KPS_TIMER
);

230 
	`De¡royWšdow
(
hwnd
);

232 
WM_DESTROY
:

233 
	`Po¡Qu™Mes§ge
(0);

236  
	`DefWšdowProc
(
hwnd
, 
msg
, 
wP¬am
, 
lP¬am
);

239 
	}
}

242 
LRESULT
 
CALLBACK
 
	$WndProcSec
(
HWND
 
hwnd
, 
UINT
 
msg
, 
WPARAM
 
wP¬am
, 
LPARAM
 
lP¬am
)

244 
msg
)

246 
WM_TIMER
:

248 
g¿ph
.
	`addDÙ
(
šput
.
	`g‘Kps
());

250 
	`Inv®id©eReù
(
hwnd
, 
NULL
, 
TRUE
);

254 
	`Upd©eWšdow
(
hwnd
);

257 
WM_PAINT
:

285 
PAINTSTRUCT
 
ps
;

286 
HDC
 
hdc
;

288 
hdc
 = 
	`BegšPašt
(
hwnd
, &
ps
);

290 
D¿w
::
	`g¿ph
(
ps
, 
hdc
, 
g¿ph
.
	`g‘DÙPŒ
());

292 
	`EndPašt
(
hwnd
, &
ps
);

297 
WM_CLOSE
:

298 
	`De¡royWšdow
(
hwnd
);

300 
WM_DESTROY
:

301 
	`Po¡Qu™Mes§ge
(0);

304  
	`DefWšdowProc
(
hwnd
, 
msg
, 
wP¬am
, 
lP¬am
);

307 
	}
}

310 
LRESULT
 
CALLBACK
 
	$MyKeybßrdProc
(
nCode
, 
WPARAM
 
wP¬am
, 
LPARAM
 
lP¬am
)

312 ià(
nCode
 =ğ
HC_ACTION
)

314 
wP¬am
)

316 
WM_KEYDOWN
:

317 
KBDLLHOOKSTRUCT
 *
kbdSŒuù
 = (KBDLLHOOKSTRUCT*)
lP¬am
;

319 iàĞ
	`G‘AsyncKeyS‹
(
kbdSŒuù
->
vkCode
) >= 0 )

321 
šput
.
	`keydown
();

325 iàĞ
kbdSŒuù
->
vkCode
 =ğ
VK_OEM_3
 )

327 
šput
.
	`Re£tMaxKps
();

332  
	`C®lNextHookEx
(
NULL
, 
nCode
, 
wP¬am
, 
lP¬am
);

333 
	}
}

353 
HBITMAP
 
	$lßdBGImage
(
WCHAR
 *
szF’ame
)

355 
HBITMAP
 
»suÉ
=
NULL
;

357 
Gdlus
::
B™m­
* 
b™m­
 = 
Ãw
 Gdlus::
	`B™m­
(
szF’ame
,
çl£
);

358 
b™m­
->
	`G‘HBITMAP
(
NULL
, &
»suÉ
);

359 
d–‘e
 
b™m­
;

360  
»suÉ
;

361 
	}
}

363 
boŞ
 
	$makeWšdow
(
WNDCLASSEX
& 
wc
,

364 
HWND
& 
hwnd
,

365 
MSG
& 
Msg
,

366 
HINSTANCE
& 
hIn¡ªû
,

367 
wšdowInfÜm©iÚ
& 
wi
)

370 
wc
.
cbSize
 = (
WNDCLASSEX
);

371 
wc
.
¡yË
 = 0;

372 
wc
.
ÍâWndProc
 = 
wi
.
WndProc
;

373 
wc
.
cbClsExŒa
 = 0;

374 
wc
.
cbWndExŒa
 = 0;

375 
wc
.
hIn¡ªû
 = hInstance;

376 
wc
.
hIcÚ
 = 
	`LßdIcÚ
(
NULL
, 
IDI_APPLICATION
);

377 
wc
.
hCursÜ
 = 
	`LßdCursÜ
(
NULL
, 
IDC_ARROW
);

379 
wc
.
hbrBackground
 = 
	`C»©eP©‹ºBrush
((
HBITMAP
è
	`LßdImage
(0,
	`_T
(
wi
.
bg
),

380 
IMAGE_BITMAP
,0,0,

381 
LR_CREATEDIBSECTION
|
LR_LOADFROMFILE
));

382 
wc
.
ÍszM’uName
 = 
NULL
;

383 
wc
.
ÍszCÏssName
 = 
wi
.
g_szCÏssName
;

384 
wc
.
hIcÚSm
 = 
	`LßdIcÚ
(
NULL
, 
IDI_APPLICATION
);

386 if(!
	`Regi¡”CÏssEx
(&
wc
))

388 
	`Mes§geBox
(
NULL
, "Window Registration Failed!", "Error!",

389 
MB_ICONEXCLAMATION
 | 
MB_OK
);

394 
hwnd
 = 
	`C»©eWšdowEx
(

395 
WS_EX_CLIENTEDGE
,

396 
wi
.
g_szCÏssName
,

397 
wi
.
t™Ë
,

398 
WS_OVERLAPPEDWINDOW
,

399 
CW_USEDEFAULT
, CW_USEDEFAULT, 
wi
.
width
, wi.
height
,

400 
NULL
, NULL, 
hIn¡ªû
, NULL);

402 if(
hwnd
 =ğ
NULL
)

404 
	`Mes§geBox
(
NULL
, "Window Creation Failed!", "Error!",

405 
MB_ICONEXCLAMATION
 | 
MB_OK
);

410 
	}
}

412 
WINAPI
 
	$WšMaš
(
HINSTANCE
 
hIn¡ªû
, HINSTANCE 
hP»vIn¡ªû
,

413 
LPSTR
 
ÍCmdLše
, 
nCmdShow
)

415 
WNDCLASSEX
 
wc
, 
wc2
;

416 
HWND
 
hwnd
, 
hwnd2
;

417 
MSG
 
Msg
, 
Msg2
;

420 
wšdowInfÜm©iÚ
 
	`wi_1
(240, 200, 
g_szCÏssName1
, "KPS", "em±y.bmp", 
WndProcPrim
);

421 if(!
	`makeWšdow
(
wc
, 
hwnd
, 
Msg
, 
hIn¡ªû
, 
wi_1
))

426 
	`ShowWšdow
(
hwnd
, 
nCmdShow
);

427 
	`Upd©eWšdow
(
hwnd
);

430 
wšdowInfÜm©iÚ
 
	`wi_2
(
S‘tšgs
::
	`g‘In¡ªû
()->
	`g‘G¿phWidth
()+20,

431 
S‘tšgs
::
	`g‘In¡ªû
()->
	`g‘G¿phHeight
()+50,

432 
g_szCÏssName2
, "G¿ph", "bg.bmp", 
WndProcSec
);

433 if(!
	`makeWšdow
(
wc2
, 
hwnd2
, 
Msg
, 
hIn¡ªû
, 
wi_2
))

437 
	`ShowWšdow
(
hwnd2
, 
nCmdShow
);

438 
	`Upd©eWšdow
(
hwnd2
);

441 
HHOOK
 
KeybßrdHook
 = 
	`S‘WšdowsHookEx
(
WH_KEYBOARD_LL
, 
MyKeybßrdProc
, 0, 0);

444 
šput
.
	`£tWšdow_±r
(&
hwnd
);

445 
S‘tšgs
::
	`g‘In¡ªû
()->
	`£tWšdow_±r
(&
hwnd
);

446 
g¿ph
.
	`£tWšdow_±r
(&
hwnd2
);

449 
Gdlus
::
GdlusS¹upIÅut
 
gdlusS¹upIÅut
;

450 
ULONG_PTR
 
gdlusTok’
;

451 
Gdlus
::
	`GdlusS¹up
(&
gdlusTok’
, &
gdlusS¹upIÅut
, 
NULL
);

454 
	`S‘Tim”
(
hwnd
, 
KPS_TIMER
, 100, 
NULL
);

455 
	`S‘Tim”
(
hwnd2
, 
GRAPH_TIMER
, 
S‘tšgs
::
	`g‘In¡ªû
()->
	`g‘G¿phUpd©eR©e
(), 
NULL
);

458 
	`G‘Mes§ge
(&
Msg
, 
NULL
, 0, 0) > 0)

460 
	`T¿n¦©eMes§ge
(&
Msg
);

461 
	`Di¥©chMes§ge
(&
Msg
);

464  
Msg
.
wP¬am
;

465 
	}
}

	@DrawFunctions.h

1 #iâdeà
DRAWFUNCTIONS_H_INCLUDED


2 
	#DRAWFUNCTIONS_H_INCLUDED


	)

4 
	~<wšdows.h
>

5 
	~<¡ršg
>

6 
	~<deque
>

7 
	~<gdlus.h
>

11 
Çme¥aû
 
	gD¿w


25 
‹xt
(
PAINTSTRUCT
 &
ps
,

26 
HDC
 &
hdc
,

27 cÚ¡ 
COLORREF
 &
‹xt_cŞÜ
,

28 cÚ¡ 
COLORREF
 &
back_cŞÜ
,

29 cÚ¡ 
HFONT
 &
hFÚt
,

30 cÚ¡ 
tİ_x
,

31 cÚ¡ 
tİ_y
,

32 cÚ¡ 
bÙ_x
,

33 cÚ¡ 
bÙ_y
,

34 
¡d
::
¡ršg
 &
¡r
);

48 
‹xt
(
PAINTSTRUCT
 &
ps
,

49 
HDC
 &
hdc
,

50 cÚ¡ 
COLORREF
 &
‹xt_cŞÜ
,

51 cÚ¡ 
COLORREF
 &
back_cŞÜ
,

52 cÚ¡ 
HFONT
 &
hFÚt
,

53 cÚ¡ 
tİ_x
,

54 cÚ¡ 
tİ_y
,

55 cÚ¡ 
bÙ_x
,

56 cÚ¡ 
bÙ_y
,

57 cÚ¡ * 
¡r
);

59 
g¿ph
(
PAINTSTRUCT
 &
ps
,

60 
HDC
 &
hdc
,

61 cÚ¡ 
¡d
::
deque
<>* 
dÙs
);

	@Graph.h

1 #iâdeà
GRAPH_H_INCLUDED


2 
	#GRAPH_H_INCLUDED


	)

4 
	~"WšdowIÁ”çû.h
"

5 
	~"IÅutHªdËr.h
"

6 
	~"S‘tšgs.h
"

7 
	~<deque
>

10 şas 
	cG¿ph
 : 
public
 
WšdowIÁ”çû


12 
public
:

13 
G¿ph
(
IÅutHªdËr
* 
šput
);

14 ~
G¿ph
();

16 
addDÙ
(cÚ¡ & 
dÙ
);

18 
	m¡d
::
deque
<>* 
g‘DÙPŒ
();

20 
	m´iv©e
:

21 
IÅutHªdËr
* 
šput
;

22 
	m¡d
::
deque
<> 
dÙs
;

	@InputHandler.h

1 #iâdeà
INPUTHANDLER_H_INCLUDED


2 
	#INPUTHANDLER_H_INCLUDED


	)

4 
	~<wšdows.h
>

5 
	~<c¡dšt
>

6 
	~<deque
>

8 
	~"WšdowIÁ”çû.h
"

10 cÚ¡ 
št16_t
 
	gdeque_size
 = 14;

11 cÚ¡ 
	gdeque_div
 = (()
deque_size
)/10;

13 şas 
	cIÅutHªdËr
 : 
public
 
WšdowIÁ”çû


15 
public
:

17 
IÅutHªdËr
();

18 ~
IÅutHªdËr
();

21 
keydown
();

24 
Re£tMaxKps
();

27 
ÿlcuÏ‹_kps_­r
();

30 
ÿlcuÏ‹_kps_´ec
();

33 
št16_t
 
g‘KeycouÁ
();

34 
g‘Kps
();

35 
g‘Tim”IÁ”v®
();

37 
	m´iv©e
:

38 
št16_t
 
keycouÁ
 = 0;

39 
	m¡d
::
deque
<> 
key_que
;

	@Settings.h

1 #iâdeà
SETTINGS_H_INCLUDED


2 
	#SETTINGS_H_INCLUDED


	)

4 
	~"WšdowIÁ”çû.h
"

6 şas 
	cS‘tšgs
 : 
public
 
WšdowIÁ”çû


8 
´iv©e
:

9 
S‘tšgs
* 
š¡ªû
;

11 
S‘tšgs
();

12 ~
S‘tšgs
();

14 
boŞ
 
	mb_®ways_Ú_tİ
 = 
çl£
;

15 
boŞ
 
	mb_wšdow_has_bÜd”s
 = 
Œue
;

16 
boŞ
 
	mb_tÙ®_keys_Ú
 = 
Œue
;

17 
boŞ
 
	mb_´ecisiÚ_mode
 = 
Œue
;

19 
	mg¿ph_upd©e_¿‹
 = 350;

20 
	mg¿ph_´ecisiÚ
 = 150;

21 
	mg¿ph_width
 = 400;

22 
	mg¿ph_height
 = 235;

23 
	mg¿ph_¡»tch
 = 4;

25 
	mpublic
:

26 
S‘tšgs
* 
g‘In¡ªû
();

29 
ToggËAlwaysOnTİ
();

30 
boŞ
 
WšdowIsAOT
();

33 
ToggËWšdowBÜd”s
();

34 
boŞ
 
WšdowHasBÜd”s
();

37 
ToggËP»cisiÚMode
();

38 
boŞ
 
P»cisiÚModeOn
();

41 
ToggËTÙ®Keys
();

42 
boŞ
 
TÙ®KeysOn
();

44 
g‘G¿phP»cisiÚ
();

45 
g‘G¿phWidth
();

46 
g‘G¿phHeight
();

47 
g‘G¿phSŒ‘ch
();

48 
g‘G¿phUpd©eR©e
();

	@WindowInterface.h

1 #iâdeà
WINDOWINTERFACE_H_INCLUDED


2 
	#WINDOWINTERFACE_H_INCLUDED


	)

4 
	~<wšdows.h
>

8 şas 
	cWšdowIÁ”çû


10 
	mpublic
:

12 
upd©e_kps
();

15 
toggË_wšdow_Ú_tİ
Ğ
boŞ
 
£t_Ú_tİ
 );

16 
toggË_wšdow_bÜd”s
Ğ
boŞ
 
£t_bÜd”
 );

19 
£tWšdow_±r
(
HWND
* 
hwnd
);

20 
HWND
* 
g‘Wšdow_±r
();

23 cÚ¡ * 
	mkps_¡r
 = "";

24 cÚ¡ * 
	mmax_kps_¡r
 = "";

25 cÚ¡ * 
	mtÙ®_keys_¡r
 = "";

27 
	m´Ùeùed
:

28 
kps
 = 0;

29 
	mmax_kps
 = 0;

30 
	mtÙ®_keys
 = 0;

31 
HWND
* 
	mwšdow_±r
;

33 
	m´iv©e
:

	@
1
.
0
16
587
C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\DRAWFU~1.CPP
C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\DRAWFU~1.H
C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\Graph.cpp
C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\Graph.h
C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\INPUTH~1.CPP
C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\INPUTH~1.H
C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\Settings.cpp
C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\Settings.h
C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\WINDOW~1.CPP
C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\WINDOW~1.H
C:\Users\Hein\DOCUME~1\CODEBL~1\KPS\main.cpp
DrawFunctions.h
Graph.h
InputHandler.h
Settings.h
WindowInterface.h
